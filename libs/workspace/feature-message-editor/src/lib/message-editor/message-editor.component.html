<form [formGroup]="messageForm" (ngSubmit)="onSubmit(chat.chatId)" *ngIf="chat">
  <quill-editor
    class="as-quill-editor"
    customToolbarPosition="bottom"
    placeholder="Message {{ chat.name }}"
    formControlName="text"
  >
    <div below-quill-editor-toolbar class="p-2">
      <div class="flex-wrap flex mb-4">
        <as-file-preview
          *ngFor="let file of attachements; index as i"
          class="max-w-[240px] mr-2"
          [file]="file"
          (deleteEvent)="deleteFile($event, i)"
          [showDelete]="true"
        ></as-file-preview>
      </div>
      <div class="flex justify-between">
        <as-input-file formControlName="attachments" [multiple]="true">
          <button
            appearance="outline"
            tuiIconButton
            type="button"
            size="s"
            icon="tuiIconPlus"
          ></button>
        </as-input-file>

        <button
          tuiIconButton
          [disabled]="messageForm.invalid"
          type="submit"
          size="s"
          icon="tuiIconSend"
        ></button>
      </div>
    </div>
  </quill-editor>
</form>
